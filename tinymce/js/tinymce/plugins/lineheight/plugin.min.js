tinymce.PluginManager.add("lineheight",function(e){Items=[{text:"缺省(1.6倍)",data:"1.6"},{text:"0.5倍",data:"0.5"},{text:"1倍",data:"1"},{text:"1.5倍",data:"1.5"},{text:"2倍",data:"2"},{text:"2.5倍",data:"2.5"},{text:"3倍",data:"3"},{text:"自定义...",data:"custom"}],e.addCommand("lineheight",function(e,t){if("custom"==t)return showlineheightdialog(),void 0;var n=tinymce.activeEditor.selection.getBookmark();tinymce.activeEditor.formatter.apply("lineheight",{value:100*t}),tinymce.activeEditor.selection.moveToBookmark(n)}),e.on("init",function(){tinymce.activeEditor.formatter.register("lineheight",{selector:"p",styles:{lineHeight:"%value%"}})}),update=function(){},showlineheightdialog=function(){win=e.windowManager.open({title:"自定义行距",body:[{name:"lineheight",type:"textbox",size:40,autofocus:!0,label:"行距(倍)",onchange:update,onkeyup:update}],onSubmit:function(t){var n=t.data,r=n.lineheight;r=Number(r),(!_.isNumber(r)||0>=r)&&global.message("error","错误的数值"),e.execCommand("lineheight",!1,r)}})},e.addButton("lineheight",{text:"行距",type:"splitbutton",icon:null,tooltip:"设定行距",menu:Items,onselect:function(t){console.log(t.control.settings.data),e.execCommand("lineheight",!1,t.control.settings.data)},onclick:function(){showlineheightdialog()}})});
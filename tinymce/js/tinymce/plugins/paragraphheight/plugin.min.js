tinymce.PluginManager.add("paragraphheight",function(e){Items=[{text:"缺省(1倍)",data:"1"},{text:"0.5倍",data:"0.5"},{text:"1倍",data:"1"},{text:"1.5倍",data:"1.5"},{text:"2倍",data:"2"},{text:"2.5倍",data:"2.5"},{text:"3倍",data:"3"},{text:"自定义...",data:"custom"}],showparagraphdialog=function(){win=e.windowManager.open({title:"自定义段落间距",body:[{name:"paragraphheight",type:"textbox",size:40,autofocus:!0,label:"段落间距(倍)"}],onSubmit:function(t){var n=t.data,r=n.paragraphheight;r=Number(r),(!_.isNumber(r)||0>=r)&&global.message("error","错误的数值"),e.execCommand("paragraphheight",!1,r)}})},e.addCommand("paragraphheight",function(e,t){if("custom"==t)return showparagraphdialog(),void 0;var n=tinymce.activeEditor.selection.getBookmark();t="0 0 "+t+"em",tinymce.activeEditor.formatter.apply("paragraphheight",{value:t}),tinymce.activeEditor.selection.moveToBookmark(n)}),e.on("init",function(){tinymce.activeEditor.formatter.register("paragraphheight",{selector:"p",styles:{margin:"%value"}})}),e.addButton("paragraphheight",{text:"段落间距",type:"splitbutton",icon:null,tooltip:"设定段落间距",menu:Items,onselect:function(t){console.log(t.control.settings.data),e.execCommand("paragraphheight",!1,t.control.settings.data)},onclick:function(){showparagraphdialog()}})});